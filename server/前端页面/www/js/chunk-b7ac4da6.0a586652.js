(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b7ac4da6"],{"0d5f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"chat"}},[a("app-header",{staticClass:"border-bottom",attrs:{hasBack:!0,title:t.username}}),a("div",{ref:"wrap",staticClass:"chat-panel",style:"bottom:"+(22+t.textHeight)+"px"},[a("div",{ref:"content",staticClass:"scoll-wrap"},[a("one-word",{attrs:{wordData:t.wordData}})],1)]),a("div",{staticClass:"send-box border-top"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.words,expression:"words"}],ref:"textarea",style:"height:"+t.textHeight+"px",attrs:{type:"text",placeholder:"发送消息"},domProps:{value:t.words},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.sendAction(e))},input:function(e){e.target.composing||(t.words=e.target.value)}}}),a("div",{staticClass:"send",on:{click:t.sendAction}},[t._v("发送")])])],1)},n=[],s=(a("861e"),a("f6f8"),a("f972"),a("a258"),a("e4e2")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.wordData,(function(e,r){return a("div",{key:r,staticClass:"chat-box"},[a("p",{staticClass:"time"},[t._v(t._s(t.time(e.time)))]),a("div",{class:["chat-content",{right:e.right}]},[a("div",{staticClass:"headImg"},[a("img",{attrs:{src:e.img,alt:""}})]),a("div",{staticClass:"data"},[a("span",{class:{right:e.right}},[t._v(t._s(e.data))])])])])})),0)},i=[],c={name:"one-word",props:["wordData"],data:function(){return{}},methods:{time:function(t){var e=(new Date).getTime(),a=new Date(t).getDate(),r=(new Date).getDate(),n=e-t;if(n>864e5){var s=new Date(t);return s.format("yyyy年MM月dd日 hh:mm")}if(r-a){var o=new Date(t);return"昨天 "+o.format("hh:mm")}var i=new Date(t);return i.format("hh:mm")}}},u=c,d=a("4e82"),l=Object(d["a"])(u,o,i,!1,null,null,null),f=l.exports,h=(a("4360"),{components:Object(s["a"])({},f.name,f),data:function(){return{words:"",textareaWidth:0,wrapHeight:0,wordData:[],username:""}},computed:{textHeight:function(){return 16*Math.floor(this.words.length/Math.ceil(this.textareaWidth/13.8))+28>=108?108:16*Math.floor(this.words.length/Math.ceil(this.textareaWidth/13.8))+28}},methods:{sendAction:function(){var t=this;if(this.words){var e={username:this.$store.state.userInfo.username,time:(new Date).getTime(),data:this.words,img:"/assets/logo.png",right:!0},a=JSON.parse(window.localStorage.getItem("chatData"));a.push(e),window.localStorage.setItem("chatData",JSON.stringify(a)),this.wordData.push(e),this.$ws.send(JSON.stringify({username:this.$store.state.userInfo.username,time:(new Date).getTime(),data:this.words,img:"/assets/logo.png",right:!1})),this.$Toast("发送成功！"),this.words="",setTimeout((function(){t.setScrollAction()}),0)}else this.$Toast("请输入些内容吧！")},setScrollAction:function(){this.wrapHeight=parseInt(getComputedStyle(this.$refs.content,null).getPropertyValue("height")),this.$refs.wrap.scrollTop=this.wrapHeight},message:function(t){var e=this;this.wordData=t,setTimeout((function(){e.setScrollAction()}),0)}},created:function(){this.$center.$on("onemessage",this.message)},mounted:function(){var t=this,e=this;window.localStorage.getItem("chatData")||window.localStorage.setItem("chatData","[]"),setTimeout((function(){t.setScrollAction()}),0),this.wordData=JSON.parse(window.localStorage.getItem("chatData")),this.textareaWidth=parseInt(window.getComputedStyle(this.$refs.textarea,null).getPropertyValue("width"))-20;var a=JSON.parse(window.localStorage.getItem("chatData"));a.map((function(t){t.right||t.username&&(e.username=t.username)}))}}),p=h,m=(a("65d0"),Object(d["a"])(p,r,n,!1,null,null,null));e["default"]=m.exports},"0f80":function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"365c":function(t,e,a){var r=a("5bf1"),n=a("5f4d").trim,s=a("0f80"),o=r.parseInt,i=/^[+-]?0[Xx]/,c=8!==o(s+"08")||22!==o(s+"0x16");t.exports=c?function(t,e){var a=n(String(t));return o(a,e>>>0||(i.test(a)?16:10))}:o},"5f4d":function(t,e,a){var r=a("b2c2"),n=a("0f80"),s="["+n+"]",o=RegExp("^"+s+s+"*"),i=RegExp(s+s+"*$"),c=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(i,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"65d0":function(t,e,a){"use strict";var r=a("854d"),n=a.n(r);n.a},"854d":function(t,e,a){},"861e":function(t,e,a){"use strict";var r=a("0e84"),n=a("92e5").map,s=a("8dc3");r({target:"Array",proto:!0,forced:!s("map")},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"8dc3":function(t,e,a){var r=a("b505"),n=a("d86a"),s=a("3a63"),o=n("species");t.exports=function(t){return s>=51||!r((function(){var e=[],a=e.constructor={};return a[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"92e5":function(t,e,a){var r=a("12fd"),n=a("57e5"),s=a("0d15"),o=a("f422"),i=a("f2a8"),c=[].push,u=function(t){var e=1==t,a=2==t,u=3==t,d=4==t,l=6==t,f=5==t||l;return function(h,p,m,g){for(var w,v,x=s(h),y=n(x),D=r(p,m,3),S=o(y.length),b=0,I=g||i,A=e?I(h,S):a?I(h,0):void 0;S>b;b++)if((f||b in y)&&(w=y[b],v=D(w,b,x),t))if(e)A[b]=v;else if(v)switch(t){case 3:return!0;case 5:return w;case 6:return b;case 2:c.call(A,w)}else if(d)return!1;return l?-1:u||d?d:A}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},a258:function(t,e,a){var r=a("0e84"),n=a("365c");r({global:!0,forced:parseInt!=n},{parseInt:n})},f2a8:function(t,e,a){var r=a("dc17"),n=a("fdac"),s=a("d86a"),o=s("species");t.exports=function(t,e){var a;return n(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?r(a)&&(a=a[o],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},fdac:function(t,e,a){var r=a("4cbe");t.exports=Array.isArray||function(t){return"Array"==r(t)}}}]);
//# sourceMappingURL=chunk-b7ac4da6.0a586652.js.map