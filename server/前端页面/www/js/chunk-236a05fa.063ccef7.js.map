{"version":3,"sources":["webpack:///./node_modules/_core-js@3.4.1@core-js/internals/sloppy-array-method.js","webpack:///./node_modules/_core-js@3.4.1@core-js/modules/es.array.for-each.js","webpack:///./node_modules/_core-js@3.4.1@core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/_core-js@3.4.1@core-js/internals/dom-iterables.js","webpack:///./node_modules/_core-js@3.4.1@core-js/internals/array-iteration.js","webpack:///./src/pages/issue/root/Issue.vue?85e2","webpack:///src/pages/issue/root/Issue.vue","webpack:///./src/pages/issue/root/Issue.vue?8517","webpack:///./src/pages/issue/root/Issue.vue","webpack:///./node_modules/_core-js@3.4.1@core-js/internals/array-for-each.js","webpack:///./src/pages/issue/root/Issue.vue?ce5f","webpack:///./node_modules/_core-js@3.4.1@core-js/internals/array-species-create.js","webpack:///./node_modules/_core-js@3.4.1@core-js/internals/is-array.js"],"names":["fails","module","exports","METHOD_NAME","argument","method","call","$","forEach","target","proto","forced","global","DOMIterables","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","bind","IndexedObject","toObject","toLength","arraySpeciesCreate","push","createMethod","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","callbackfn","that","specificCreate","value","result","O","self","boundFunction","length","index","create","undefined","map","filter","some","every","find","findIndex","render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","staticClass","on","uploaderAction","slot","_v","model","callback","$$v","fileList","expression","_s","words","directives","name","rawName","ref","domProps","$event","composing","option1","value1","address","_e","geoAction","checked","_m","staticRenderFns","beforeRouteEnter","store","next","data","url","methods","$Toast","loading","formData","FormData","baseImg","append","item","file","$refs","desc","text","headers","message","forbidClick","duration","geolocation","BMap","Geolocation","getCurrentPosition","getStatus","BMAP_STATUS_SUCCESS","Marker","r","point","getAddress","alert","gc","Geocoder","getLocation","addComp","rs","addressComponents","clear","watch","substr","component","$forEach","sloppyArrayMethod","arguments","isObject","isArray","wellKnownSymbol","SPECIES","originalArray","C","constructor","Array","classof","arg"],"mappings":"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","file":"js/chunk-236a05fa.063ccef7.js","sourcesContent":["'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !method || !fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","var bind = require('../internals/bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6)\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"issue\"}},[_c('div',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"allmap\"}}),_c('app-header',{attrs:{\"hasBack\":true,\"title\":\"发布\"}},[_c('span',{staticClass:\"right-btn\",attrs:{\"slot\":\"right-btn\"},on:{\"click\":_vm.uploaderAction},slot:\"right-btn\"},[_vm._v(\"上传\")])]),_c('div',{staticClass:\"content noBar\"},[_c('van-uploader',{staticClass:\"uploader\",attrs:{\"multiple\":\"\",\"max-count\":4},model:{value:(_vm.fileList),callback:function ($$v) {_vm.fileList=$$v},expression:\"fileList\"}}),_c('div',{staticClass:\"desc border-bottom\"},[_c('div',{staticClass:\"desc-title\"},[_c('h3',[_vm._v(\"描述\")]),_c('p',[_vm._v(_vm._s(_vm.words.length)+\"/1000\")])]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.words),expression:\"words\"}],ref:\"desc\",attrs:{\"placeholder\":\"填写描述和主题，可以让更多的人看到你的作品\"},domProps:{\"value\":(_vm.words)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.words=$event.target.value}}})]),_c('div',{staticClass:\"theme border-bottom\"},[_c('h3',[_vm._v(\"主题\")]),_c('van-dropdown-menu',{staticStyle:{\"height\":\"18px\"}},[_c('van-dropdown-item',{staticStyle:{\"font-size\":\"13px\"},attrs:{\"options\":_vm.option1},model:{value:(_vm.value1),callback:function ($$v) {_vm.value1=$$v},expression:\"value1\"}})],1)],1),_c('div',{staticClass:\"address border-bottom\"},[_c('h3',[_vm._v(\"位置\")]),(!_vm.address)?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.geoAction}},[_vm._v(\"点击获得作品位置\")]):_vm._e(),(_vm.address)?_c('a',[_vm._v(_vm._s(_vm.address))]):_vm._e()]),_c('div',{staticClass:\"pro\"},[_c('van-switch-cell',{staticClass:\"border-bottom\",attrs:{\"title\":\"原创\"},model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}})],1),_vm._m(0)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"footerEnd\"},[_c('p',[_vm._v(\"-The end-\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"issue\">\r\n    <div style=\"display:none\" id=\"allmap\"></div>\r\n    <app-header :hasBack=\"true\" title=\"发布\">\r\n      <span slot=\"right-btn\" class=\"right-btn\" @click=\"uploaderAction\">上传</span>\r\n    </app-header>\r\n\r\n    <div class=\"content noBar\">\r\n      <van-uploader v-model=\"fileList\" multiple :max-count=\"4\" class=\"uploader\" />\r\n      <div class=\"desc border-bottom\">\r\n        <div class=\"desc-title\">\r\n          <h3>描述</h3>\r\n          <p>{{words.length}}/1000</p>\r\n        </div>\r\n        <textarea ref=\"desc\" v-model=\"words\" placeholder=\"填写描述和主题，可以让更多的人看到你的作品\"></textarea>\r\n      </div>\r\n      <div class=\"theme border-bottom\">\r\n        <h3>主题</h3>\r\n        <van-dropdown-menu style=\"height: 18px;\">\r\n          <van-dropdown-item v-model=\"value1\" :options=\"option1\" style=\"font-size: 13px;\" />\r\n        </van-dropdown-menu>\r\n      </div>\r\n      <div class=\"address border-bottom\">\r\n        <h3>位置</h3>\r\n        <a v-if=\"!address\" href=\"#\" @click=\"geoAction\">点击获得作品位置</a>\r\n        <a v-if=\"address\">{{address}}</a>\r\n      </div>\r\n      <div class=\"pro\">\r\n        <van-switch-cell class=\"border-bottom\" v-model=\"checked\" title=\"原创\" />\r\n      </div>\r\n      <div class=\"footerEnd\">\r\n        <p>-The end-</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"../../../store\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  beforeRouteEnter(to, from, next) {\r\n    if (store.state.isLogin) {\r\n      next();\r\n    } else {\r\n      next(\"/login\");\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      fileList: [],\r\n      words: \"\",\r\n      value1: 0,\r\n      option1: [\r\n        { text: \"摄影师日常\", value: 0 },\r\n        { text: \"分享一个好天气\", value: 1 },\r\n        { text: \"假日旅行计划\", value: 2 },\r\n        { text: \"趣味图片\", value: 3 },\r\n        { text: \"吃货的世界\", value: 4 },\r\n        { text: \"电影看这里\", value: 5 },\r\n        { text: \"我爱这世界\", value: 6 },\r\n        { text: \"拒绝平庸\", value: 7 },\r\n        { text: \"美妆你懂吗\", value: 8 },\r\n        { text: \"无尽天光与你\", value: 9 },\r\n        { text: \"其他\", value: 10 }\r\n      ],\r\n      checked: true,\r\n      address: \"\",\r\n      url: \"\"\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    uploaderAction() {\r\n      if (this.fileList.length == 0) {\r\n        this.$Toast(\"请添加至少一张图片\");\r\n      } else if (this.$refs.desc.value == \"\" || this.address == \"\") {\r\n        this.$Toast(\"请将信息填写完整\");\r\n      } else {\r\n        this.$Toast.loading(\"正在发布...\");\r\n        var formData = new FormData();\r\n        var baseImg = [];\r\n        //  将所有图片挂到formData上\r\n        this.fileList.forEach(item => {\r\n          formData.append(\"img\", item.file);\r\n          baseImg.push(this.fileList.value);\r\n        });\r\n\r\n        const v = document.querySelector(\".van-uploader__input\").value;\r\n        // console.log(v);\r\n\r\n        formData.append(\"desc\", this.$refs.desc.value);\r\n        formData.append(\"address\", this.address);\r\n        formData.append(\"theme\", this.option1[this.value1].text);\r\n        formData.append(\"pro\", this.checked);\r\n\r\n        var self = this;\r\n\r\n        // 开始上传\r\n        let config = {\r\n          //添加请求头\r\n          headers: { \"Content-Type\": \"multipart/form-data\" }\r\n        };\r\n        axios\r\n          .post(\"http://localhost:4000/upload/img\", formData, config)\r\n          .then(function(response) {\r\n            var id;\r\n            if (!storage.get(\"soso\")) {\r\n              id=0;\r\n            }else{\r\n              id=storage.get(\"soso\").length;\r\n            }\r\n            var data = {\r\n              id,\r\n              username:store.state.userInfo.username,\r\n              img: response.data,\r\n              desc: self.$refs.desc.value,\r\n              address: self.address,\r\n              pro: self.option1[self.value1].text,\r\n              checked: self.checked\r\n            };\r\n\r\n            if (!storage.get(\"soso\")) {\r\n              storage.set(\"soso\", []);\r\n            }\r\n\r\n            var localData = storage.get(\"soso\");\r\n\r\n            localData.push(data);\r\n            // console.log(localData);\r\n            storage.set(\"soso\", localData);\r\n            self.$router.push('/topic/today');\r\n            \r\n            // this.$router.push(\"/home\");\r\n            self.$Toast.clear();\r\n            \r\n          })\r\n          .catch(function(error) {\r\n            // alert(\"上传失败！\");\r\n            console.log(error);\r\n          });\r\n        // console.log(formData.get(\"img\"));\r\n      }\r\n     \r\n    },\r\n    geoAction() {\r\n      this.$Toast.loading({\r\n        message: \"位置获取中...\",\r\n        forbidClick: true,\r\n        duration: 0\r\n      });\r\n\r\n      var self = this;\r\n      var geolocation = new BMap.Geolocation();\r\n      geolocation.getCurrentPosition(function(r) {\r\n        if (this.getStatus() == BMAP_STATUS_SUCCESS) {\r\n          var mk = new BMap.Marker(r.point);\r\n          self.getAddress(r.point);\r\n        } else {\r\n          alert(\"failed\" + this.getStatus());\r\n        }\r\n      });\r\n    },\r\n    //获取地址信息，设置地址label\r\n    getAddress(point) {\r\n      var self = this;\r\n      var gc = new BMap.Geocoder();\r\n      gc.getLocation(point, function(rs) {\r\n        var addComp = rs.addressComponents;\r\n        var address =\r\n          addComp.province +\r\n          addComp.city +\r\n          addComp.district +\r\n          addComp.street +\r\n          addComp.streetNumber; //获取地址\r\n        self.address = address;\r\n        self.$Toast.clear();\r\n      });\r\n    }\r\n  },\r\n  watch: {\r\n    words() {\r\n      if (this.words.length >= 1000) {\r\n        this.words = this.words.substr(0, 1000);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.content {\r\n  position: absolute;\r\n  top: 45px;\r\n  bottom: 49px;\r\n  width: 100%;\r\n\r\n  &.noBar {\r\n    bottom: 0;\r\n    z-index: 200;\r\n  }\r\n}\r\n#issue {\r\n  height: 100%;\r\n  width: 100%;\r\n\r\n  font-family: STXingkai;\r\n}\r\nh3 {\r\n  font-size: 14px;\r\n  color: #333;\r\n  width: 70px;\r\n  text-align: center;\r\n}\r\n.content {\r\n  box-sizing: border-box;\r\n  background: #fff;\r\n  position: absolute;\r\n  .uploader {\r\n    padding: 15px 11px;\r\n    box-sizing: border-box;\r\n  }\r\n  .desc {\r\n    width: 100%;\r\n    display: flex;\r\n    padding: 15px 11px;\r\n    box-sizing: border-box;\r\n    .desc-title {\r\n      width: 70px;\r\n      text-align: center;\r\n\r\n      p {\r\n        font-size: 12px;\r\n        color: #bbb;\r\n        line-height: 24px;\r\n      }\r\n    }\r\n    textarea {\r\n      flex: 1;\r\n      height: 100px;\r\n      border: none;\r\n      box-sizing: border-box;\r\n      color: #666;\r\n      font-size: 13px;\r\n    }\r\n    textarea::-webkit-input-placeholder {\r\n      font-size: 13px;\r\n      color: #bbb;\r\n      resize: none;\r\n    }\r\n  }\r\n  .theme {\r\n    width: 100%;\r\n    display: flex;\r\n    padding: 15px 11px;\r\n    height: 48px;\r\n    box-sizing: border-box;\r\n    h3 {\r\n      line-height: 18px;\r\n    }\r\n  }\r\n  .address {\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    display: flex;\r\n    padding: 15px 11px;\r\n    a {\r\n      font-size: 13px;\r\n      color: #1989fa;\r\n    }\r\n  }\r\n}\r\n\r\n.footerEnd {\r\n  position: absolute;\r\n  bottom: 0;\r\n  height: 49px;\r\n  width: 100%;\r\n  text-align: center;\r\n  line-height: 49px;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./Issue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./Issue.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Issue.vue?vue&type=template&id=c0e6666a&scoped=true&\"\nimport script from \"./Issue.vue?vue&type=script&lang=js&\"\nexport * from \"./Issue.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Issue.vue?vue&type=style&index=0&id=c0e6666a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c0e6666a\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = sloppyArrayMethod('forEach') ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.8.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@3.2.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.0@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./Issue.vue?vue&type=style&index=0&id=c0e6666a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.8.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@3.2.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.0@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./Issue.vue?vue&type=style&index=0&id=c0e6666a&lang=scss&scoped=true&\"","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n"],"sourceRoot":""}